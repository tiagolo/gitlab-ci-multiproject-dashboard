webpackJsonp([1],{"6dbh":function(e,t){},"7zck":function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("7+uW"),r=n("3EgV"),s=n.n(r),a=(n("7zck"),n("Dd8w")),o=n.n(a),c=n("NYxO"),l={name:"Configuration",data:function(){return{e1:!0,opened:!1}},computed:o()({openSettings:function(){return this.opened||!this.gitlabUrl||!this.gitlabToken}},Object(c.c)(["gitlabUrl","gitlabToken"])),methods:o()({},Object(c.d)(["setGitlabUrl","setGitlabToken"]))},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{persistent:"",value:e.openSettings,"max-width":"500px"}},[n("v-btn",{attrs:{slot:"activator",icon:""},on:{click:function(t){t.stopPropagation(),e.opened=!0}},slot:"activator"},[n("v-icon",[e._v("settings")])],1),e._v(" "),n("v-card",[n("v-card-title",[e._v("\n      Configuration\n    ")]),e._v(" "),n("v-card-text",[n("v-text-field",{attrs:{label:"Gitlab URL",value:e.gitlabUrl},on:{input:e.setGitlabUrl}}),e._v(" "),n("v-text-field",{attrs:{password:"",counter:"",label:"Gitlab TOKEN",value:e.gitlabToken,"append-icon":e.e1?"visibility":"visibility_off","append-icon-cb":function(){return e.e1=!e.e1},type:e.e1?"password":"text"},on:{input:e.setGitlabToken}})],1),e._v(" "),n("v-card-actions",[n("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){e.opened=!1}}},[e._v("Close")])],1)],1)],1)},staticRenderFns:[]},p={name:"App",components:{Configuration:n("VU/8")(l,u,!1,null,null,null).exports},computed:o()({},Object(c.c)(["gitlabUrl"]),{now:function(){return new Date(Date.now()).toLocaleString()}})},v={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{id:"app"}},[n("v-toolbar",{attrs:{color:"purple darken-3",dark:"",app:"","clipped-left":e.$vuetify.breakpoint.lgAndUp,fixed:""}},[n("v-toolbar-title",[e._v("GitLab Dashboard - "+e._s(e.gitlabUrl))]),e._v(" "),n("v-spacer"),e._v(" "),n("Configuration")],1),e._v(" "),n("v-content",[n("v-container",{attrs:{fluid:""}},[n("router-view")],1)],1),e._v(" "),n("v-footer",{attrs:{app:"",dark:"",color:"purple darken-4"}},[n("v-container",{attrs:{fluid:"","text-xs-center":"","grid-list-xs":""}},[e._v(e._s(e.now))])],1)],1)},staticRenderFns:[]},d=n("VU/8")(p,v,!1,null,null,null).exports,h=n("/ocq"),_={name:"SelectProject",data:function(){return{ux_sheet:!1,ux_isDragging:!1,ux_startY:null,ux_startHeight:null,ux_height:400,ux_isSearchEnabled:!1,search:"",msgSelectProject:"Selecione o Projeto"}},computed:o()({},Object(c.c)(["getAvailableProjects"]),{filteredAvailableProjects:function(){var e=this,t=this.getAvailableProjects;return this.search&&(t=this.getAvailableProjects.filter(function(t){return t.path_with_namespace.includes(e.search)})),t},selectedProjects:{get:function(){return this.$store.getters.getSelectedProjects.map(function(e){return e.id})},set:function(e){this.$store.dispatch("selectProjectsById",e)}}}),watch:{ux_sheet:function(e){e&&this.fetchAvailableProjects()}},methods:o()({},Object(c.b)(["fetchAvailableProjects"]),{uxToggleSearch:function(){this.ux_isSearchEnabled=!this.ux_isSearchEnabled,this.ux_isSearchEnabled||(this.search=""),this.uxToggleSearch()&&this.ux_searchInput.focus()},onMouseDown:function(e){this.ux_isDragging=!0,this.ux_startY=e.pageY,this.ux_startHeight=this.ux_height},onMouseMove:function(e){if(this.ux_isDragging){var t=e.pageY-this.ux_startY;this.ux_height=this.ux_startHeight-t}},onMouseUp:function(){this.ux_isDragging=!1}})},f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-bottom-sheet",{attrs:{inset:"",lazy:""},model:{value:e.ux_sheet,callback:function(t){e.ux_sheet=t},expression:"ux_sheet"}},[n("v-btn",{attrs:{slot:"activator",fixed:"",bottom:"",right:"",fab:"",dark:"",color:"pink"},slot:"activator"},[n("v-icon",[e._v("add")])],1),e._v(" "),n("v-flex",{on:{mousemove:e.onMouseMove,mouseleave:e.onMouseMove,mouseup:e.onMouseUp}},[n("v-toolbar",{attrs:{id:"toolbarPanel",color:"cyan",dark:""}},[n("v-toolbar-side-icon",{on:{mousedown:e.onMouseDown}}),e._v(" "),e.ux_isSearchEnabled?n("v-text-field",{attrs:{autofocus:"","prepend-icon":"search","append-icon":"close","append-icon-cb":e.uxToggleSearch,label:"Search","solo-inverted":"",flat:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"esc",27,t.key,"Escape")?e.uxToggleSearch(t):null}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}):[n("v-toolbar-title",{on:{click:e.uxToggleSearch}},[e._v(e._s(e.msgSelectProject))]),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{attrs:{icon:""},on:{click:e.uxToggleSearch}},[n("v-icon",[e._v("search")])],1)]],2),e._v(" "),n("v-list",{staticClass:"scroll-y",style:{maxHeight:this.ux_height+"px"},attrs:{id:"projectList","two-line":""}},[e._l(e.filteredAvailableProjects,function(t){return[n("v-list-tile",{key:t.name_with_namespace,attrs:{avatar:""}},[n("v-list-tile-action",[n("v-checkbox",{attrs:{readonly:"",value:t.id,id:"ch"+t.id},model:{value:e.selectedProjects,callback:function(t){e.selectedProjects=t},expression:"selectedProjects"}})],1),e._v(" "),n("v-list-tile-avatar",{attrs:{color:"blue"}},[t.avatar_url?n("img",{attrs:{src:t.avatar_url}}):n("v-card-text",[e._v(e._s(t.name.substring(0,1).toUpperCase()))])],1),e._v(" "),n("v-list-tile-content",[n("v-list-tile-title",{domProps:{innerHTML:e._s(t.name)}}),e._v(" "),n("v-list-tile-sub-title",{domProps:{innerHTML:e._s(t.path_with_namespace)}})],1)],1)]})],2)],1)],1)},staticRenderFns:[]},g=n("VU/8")(_,f,!1,null,null,null).exports,j={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-avatar",{class:[{animation:this.isRunning},this.getPipelineStatusColor]},[t("v-icon",{attrs:{dark:""}},[this._v(this._s(this.getPipelineStatusIcon))])],1)},staticRenderFns:[]};var b={name:"PipelineStatus",components:{StatusIndicator:n("VU/8")({name:"PipelineStatus",props:{pipeline:{}},computed:{isRunning:function(){return"running"===this.pipeline.status},getPipelineStatusColor:function(){switch(this.pipeline.status){case"success":return"green";case"failed":return"red";case"pending":return"orange";case"running":return"blue";case"manual":return"brown lighten-1";default:return"grey darken-1"}},getPipelineStatusIcon:function(){switch(this.pipeline.status){case"success":return"check";case"failed":return"block";case"pending":return"pause";case"running":return"play_arrow";case"manual":return"skip_next";default:return"remove"}}}},j,!1,function(e){n("6dbh")},"data-v-08405750",null).exports},props:{project:{},pipeline:{}},methods:{openPipeline:function(){window.open(this.project.web_url+"/pipelines/"+this.pipeline.id,"_blank")}}},m={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-chip",{key:this.pipeline.id,on:{click:this.openPipeline}},[t("StatusIndicator",{attrs:{pipeline:this.pipeline}}),this._v("\n    "+this._s(this.pipeline.ref)+"\n")],1)},staticRenderFns:[]};var P=n("VU/8")(b,m,!1,function(e){n("ausA")},null,null).exports,x={name:"ProjectStatus",components:{PipelineStatus:P},props:{project:{},isLastItem:!0},data:function(){return{interval:0,isFetching:!1}},created:function(){this.fetchProject(),this.interval=setInterval(this.fetchProject,1e4)},beforeDestroy:function(){clearInterval(this.interval)},methods:{removeProject:function(){this.$store.dispatch("handleRemoveProject",this.project)},fetchProject:function(){var e=this;this.isFetching=!0,this.$store.dispatch("handleProjectLoad",this.project).then(function(){return e.isFetching=!1})}},watch:{project:function(e,t){console.log(e),console.log(t)}}},k={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-list-tile",{key:e.project.id},[n("v-list-tile-content",[n("v-list-tile-title",[e._v("\n        "+e._s(e.project.id)+" - "+e._s(e.project.name_with_namespace)+"\n      ")]),e._v(" "),e.project.pipelines?n("div",[n("v-list-tile-sub-title",[e.project.pipelines.branches?n("span",[e._v("Branches")]):e._e(),e._v(" "),e._l(e.project.pipelines.branches,function(t){return n("PipelineStatus",{key:t.id,attrs:{pipeline:t,project:e.project}})})],2),e._v(" "),n("v-list-tile-sub-title",[e.project.pipelines.tags?n("span",[e._v("Tags")]):e._e(),e._v(" "),e._l(e.project.pipelines.tags,function(t){return n("PipelineStatus",{key:t.id,attrs:{pipeline:t,project:e.project}})})],2),e._v(" "),n("v-list-tile-sub-title",[e.project.pipelines.variables?n("span",[e._v("Variables")]):e._e(),e._v(" "),e._l(e.project.pipelines.variables,function(t){return[e._v("\n            "+e._s(t.key)+" - "+e._s(t.value)+"\n          ")]})],2)],1):e._e()],1),e._v(" "),n("v-list-tile-action",[e.isFetching?n("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}}):n("v-btn",{attrs:{icon:"",flat:"",ripple:"",color:"error"},on:{click:e.removeProject}},[n("v-icon",[e._v("delete")])],1)],1)],1),e._v(" "),n("v-divider",{directives:[{name:"show",rawName:"v-show",value:!e.isLastItem,expression:"!isLastItem"}]})],1)},staticRenderFns:[]};var S=n("VU/8")(x,k,!1,function(e){n("qO9O")},null,null).exports,w={name:"ProjectCard",components:{PipelineStatus:P},props:{project:{}},data:function(){return{interval:0,isFetching:!1}},created:function(){},beforeDestroy:function(){clearInterval(this.interval)},methods:{removeProject:function(){this.$store.dispatch("handleRemoveProject",this.project)},fetchProject:function(){var e=this;this.isFetching=!0,this.$store.dispatch("handleProjectLoad",this.project).then(function(){return e.isFetching=!1})}}},y={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-flex",[n("v-card",{staticClass:"white--text flexcard",attrs:{color:"blue-grey darken-2",height:"100%"}},[n("v-card-title",{attrs:{"primary-title":""}},[n("div",[n("h2",{staticClass:"headline d-block"},[e._v(e._s(e.project.name))]),e._v(" "),n("div",[e._v(e._s(e.project.path_with_namespace))])])]),e._v(" "),e.project.pipelines?n("v-card-actions",{staticClass:"grow"},[e.project.pipelines.branches?n("div",e._l(e.project.pipelines.branches,function(t){return n("PipelineStatus",{key:t.id,attrs:{pipeline:t,project:e.project}})})):e._e()]):e._e()],1)],1)},staticRenderFns:[]};var T={name:"Dashboard",components:{ProjectCard:n("VU/8")(w,y,!1,function(e){n("fOWC")},"data-v-ba97cf4c",null).exports,ProjectStatus:S,SelectProject:g},computed:o()({},Object(c.c)(["gitlab_project_query","getSelectedProjects"])),methods:{isLastItem:function(e){return this.getSelectedProjects.length===e+1}}},U={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:"","grid-list-xs":"","pa-0":"","ma-0":"",id:"dashboard"}},[n("v-container",{directives:[{name:"show",rawName:"v-show",value:e.getSelectedProjects.length,expression:"getSelectedProjects.length"}],attrs:{"grid-list-xs":"",fluid:""}},[n("v-layout",{attrs:{row:"",wrap:"","d-flex":""}},e._l(e.getSelectedProjects,function(e){return n("ProjectCard",{key:e.id,attrs:{project:e}})}))],1),e._v(" "),n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-card",[n("v-list",{directives:[{name:"show",rawName:"v-show",value:e.getSelectedProjects.length,expression:"getSelectedProjects.length"}]},e._l(e.getSelectedProjects,function(t,i){return n("ProjectStatus",{key:t.id,attrs:{project:t,"is-last-item":e.isLastItem(i)}})}))],1)],1)],1),e._v(" "),n("SelectProject")],1)},staticRenderFns:[]},E=n("VU/8")(T,U,!1,null,null,null).exports;i.a.use(h.a);var O=new h.a({routes:[{path:"/",name:"Dashboard",component:E}]}),A=n("v/L+"),I=n.n(A),C=(n("sax8"),{state:{_gitlabUrl:"https://gitlab.com",_gitlabToken:""},getters:{gitlabUrl:function(e){return e._gitlabUrl},gitlabToken:function(e){return e._gitlabToken}},mutations:{setGitlabUrl:function(e,t){e._gitlabUrl=t},setGitlabToken:function(e,t){e._gitlabToken=t}}}),R=n("mvHQ"),F=n.n(R),M=n("fZjL"),L=n.n(M),$=n("M4fF"),D=n.n($),G={gitlab_project_query:function(e){return L()(e._gitlab_query_params).reduce(function(t,n){return t.match("=")||(t=t+"="+e._gitlab_query_params[t]),t+"&"+n+"="+e._gitlab_query_params[n]})},getAvailableProjects:function(e){return e.availableProjects},getSelectedProjects:function(e){return e.selectedProjects}},q={state:{isFetching:!1,selectedProjects:[],availableProjects:[],_gitlab_query_params:{search:"",order_by:"path",sort:"asc",membership:!0,per_page:300}},getters:G,mutations:{setSelectedProjects:function(e,t){t.forEach(function(t){e.selectedProjects.find(function(e){return e.id===t.id})||(t.pipelines||(t.pipelines={}),e.selectedProjects.push(t))})},clearSelectedProjects:function(e){e.selectedProjects=[]},removeProject:function(e,t){var n=e.selectedProjects.findIndex(function(e){return e.id===t.id});(n||0===n)&&e.selectedProjects.splice(n,1)},setAvailableProjects:function(e,t){e.availableProjects=D.a.sortBy(t,"path_with_namespace")},setProjectPipeline:function(e,t){var n=e.selectedProjects.findIndex(function(e){return e.id===t.project.id});i.a.set(e.selectedProjects[n].pipelines,t.prop,t.json)}},actions:{selectProjectsById:function(e,t){var n=e.state,i=e.commit,r=t.map(function(e){return n.availableProjects.find(function(t){return t.id===e})});i("setSelectedProjects",JSON.parse(F()(r)))},fetchAvailableProjects:function(e){var t=e.state,n=e.rootGetters,i=e.commit;fetch(n.gitlabUrl+"/api/v4/projects?"+G.gitlab_project_query(t)+"&private_token="+n.gitlabToken).then(function(e){return e.json()}).then(function(e){i("setAvailableProjects",e)})},handleProjectLoad:function(e,t){var n=e.rootGetters,i=e.commit;fetch(n.gitlabUrl+"/api/v4/projects/"+t.id+"/pipelines?scope=branches&per_page=3&private_token="+n.gitlabToken).then(function(e){return e.json()}).then(function(e){e.length&&i("setProjectPipeline",{project:t,json:e,prop:"branches"})}),fetch(n.gitlabUrl+"/api/v4/projects/"+t.id+"/pipelines?scope=tags&per_page=3&private_token="+n.gitlabToken).then(function(e){return e.json()}).then(function(e){e.length&&i("setProjectPipeline",{project:t,json:e,prop:"tags"})}),fetch(n.gitlabUrl+"/api/v4/projects/"+t.id+"/variables?private_token="+n.gitlabToken).then(function(e){return e.json()}).then(function(e){e.length})},handleRemoveProject:function(e,t){(0,e.commit)("removeProject",t)}}};i.a.use(c.a);var N=new I.a({strictMode:!1,storage:window.localStorage}),V=new c.a.Store({modules:{configuration:C,projects:q},mutations:{RESTORE_MUTATION:N.RESTORE_MUTATION},strict:!1,plugins:[N.plugin]});i.a.use(s.a),i.a.config.productionTip=!1,new i.a({el:"#app",store:V,router:O,components:{App:d},template:"<App/>"})},ausA:function(e,t){},fOWC:function(e,t){},qO9O:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.6bbf79c42b83031ecfb0.js.map