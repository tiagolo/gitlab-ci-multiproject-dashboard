webpackJsonp([1],{"7zck":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),r=n("3EgV"),a=n.n(r),s=(n("7zck"),n("Dd8w")),o=n.n(s),l=n("NYxO"),c={name:"Configuration",props:{settings:{}},data:function(){return{e1:!0}},computed:o()({openSettings:function(){return this.settings||!this.gitlab_url||!this.gitlab_token}},Object(l.b)(["gitlab_url","gitlab_token"])),methods:Object(l.c)(["set_gitlab_url","set_gitlab_token"])},u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:t.openSettings,callback:function(e){t.openSettings=e},expression:"openSettings"}},[n("v-card",[n("v-card-title",[t._v("\n      Configuration\n    ")]),t._v(" "),n("v-card-text",[n("v-text-field",{attrs:{label:"Gitlab URL",value:t.gitlab_url},on:{input:t.set_gitlab_url}}),t._v(" "),n("v-text-field",{attrs:{password:"",counter:"",label:"Gitlab TOKEN",value:t.gitlab_token,"append-icon":t.e1?"visibility":"visibility_off","append-icon-cb":function(){return t.e1=!t.e1},type:t.e1?"password":"text"},on:{input:t.set_gitlab_token}})],1),t._v(" "),n("v-card-actions",[n("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(e){t.settings=!1}}},[t._v("Close")])],1)],1)],1)},staticRenderFns:[]},p={name:"App",components:{Configuration:n("VU/8")(c,u,!1,null,null,null).exports},data:function(){return{settings:!1,drawer:!1}},methods:{now:function(){return new Date(Date.now()).toLocaleString()}}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{id:"app"}},[n("v-navigation-drawer",{attrs:{clipped:t.$vuetify.breakpoint.lgAndUp,fixed:"",app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}}),t._v(" "),n("v-toolbar",{attrs:{color:"purple darken-3",dark:"",app:"","clipped-left":t.$vuetify.breakpoint.lgAndUp,fixed:""}},[n("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),t._v(" "),n("v-toolbar-title",[t._v(" GitLab Dashboard")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{icon:""},on:{click:function(e){t.settings=!t.settings}}},[n("v-icon",[t._v("settings")])],1)],1),t._v(" "),n("v-content",[n("v-container",{attrs:{fluid:""}},[n("router-view")],1)],1),t._v(" "),n("v-footer",{attrs:{app:"",dark:"",color:"purple darken-4"}},[n("v-container",{attrs:{fluid:"","text-xs-center":"","grid-list-xs":""}},[t._v(t._s(t.now()))])],1),t._v(" "),n("Configuration",{attrs:{settings:t.settings}})],1)},staticRenderFns:[]},v=n("VU/8")(p,d,!1,null,null,null).exports,_=n("/ocq"),h=n("fZjL"),f=n.n(h),g={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-avatar",{class:this.getPipelineStatusColor},[e("v-icon",{attrs:{dark:""}},[this._v(this._s(this.getPipelineStatusIcon))])],1)},staticRenderFns:[]},b={name:"Dashboard",components:{PipelineStatus:n("VU/8")({name:"PipelineStatus",props:{pipeline:{}},computed:{getPipelineStatusColor:function(){switch(this.pipeline.status){case"success":return"green";case"failed":return"red";case"pending":return"orange";case"running":return"blue";default:return"grey darken-1"}},getPipelineStatusIcon:function(){switch(this.pipeline.status){case"success":return"check";case"failed":return"block";case"pending":return"pause";case"running":return"play_arrow";default:return"remove"}}}},g,!1,null,null,null).exports},data:function(){return{gitlab_query_params:{search:"",order_by:"path"},message:"GitLab MultiProject Dashboard",currentProject:"",projects:[{name_with_namespace:""}],search:"",selectedProjects:[],name:"",email:"",loading:!1,select:null,items:["Item 1","Item 2","Item 3","Item 4"],checkbox:null,dictionary:{attributes:{email:"E-mail Address"},custom:{name:{required:function(){return"Name can not be empty"},max:"The name field may not be greater than 10 characters"},select:{required:"Select field is required"}}}}},computed:{gitlab_url:function(){return this.$store.state.configuration.gitlab_url},gitlab_token:function(){return this.$store.state.configuration.gitlab_token},gitlab_project_query:function(){var t=this;return f()(this.gitlab_query_params).reduce(function(e,n){return e.match("=")||(e=e+"="+t.gitlab_query_params[e]),e+"&"+n+"="+t.gitlab_query_params[n]})}},created:function(){this.fetchProjects()},methods:{submit:function(){},clear:function(){this.name="",this.email="",this.select=null,this.checkbox=null,this.$validator.reset()},fetchProjects:function(){var t=this;fetch(this.gitlab_url+"/api/v4/projects?"+this.gitlab_project_query+"&private_token="+this.gitlab_token).then(function(t){return t.json()}).then(function(e){t.projects=e})},handleProjectLoad:function(t){var e=this;fetch(this.gitlab_url+"/api/v4/projects/"+t.id+"/pipelines?scope=branches&per_page=5&private_token="+this.gitlab_token).then(function(t){return t.json()}).then(function(n){n.length&&(t.pipelines||e.$set(t,"pipelines",{}),e.$set(t.pipelines,"branches",n))}),fetch(this.gitlab_url+"/api/v4/projects/"+t.id+"/pipelines?scope=tags&per_page=5&private_token="+this.gitlab_token).then(function(t){return t.json()}).then(function(n){n.length&&(t.pipelines||e.$set(t,"pipelines",{}),e.$set(t.pipelines,"tags",n))}),fetch(this.gitlab_url+"/api/v4/projects/"+t.id+"/variables?private_token="+this.gitlab_token).then(function(t){return t.json()}).then(function(n){n.length&&(t.pipelines||e.$set(t,"pipelines",{}),e.$set(t.pipelines,"variables",n))})},handleSelectProject:function(){this.selectedProjects.push(this.currentProject)},handleRemoveProject:function(t){var e=this.selectedProjects.indexOf(t);e>=0&&this.selectedProjects.splice(e,1)}},watch:{search:function(t){t&&(this.gitlab_query_params.search=t),this.fetchProjects(),console.log("Watcher Fetching projects")},selectedProjects:function(t){var e=this;t.forEach(function(t){return e.handleProjectLoad(t)})}}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:"","grid-list-xl":"",id:"dashboard"}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-card",[n("v-card-title",[n("h1",[t._v(t._s(t.message)+" - "+t._s(t.gitlab_url))])]),t._v(" "),n("v-card-text",[n("v-form",{on:{submit:function(e){return e.preventDefault(),t.handleSelectProject(e)}}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs10:""}},[n("v-select",{attrs:{"single-line":"",autocomplete:"",clearable:"",name:"Projects",label:"Select","item-text":"name_with_namespace","no-data-text":"Sem registros encontrados ...",items:t.projects,loading:t.loading,"search-input":t.search},on:{"update:searchInput":function(e){t.search=e}},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleSelectProject(e):null}},model:{value:t.currentProject,callback:function(e){t.currentProject=e},expression:"currentProject"}})],1),t._v(" "),n("v-flex",{attrs:{xs2:""}},[n("v-btn",{on:{click:t.handleSelectProject}},[t._v("Get Pipelines")])],1)],1)],1)],1)],1)],1),t._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-card",[n("v-card-title",[n("h3",[t._v("Select Projects")])]),t._v(" "),n("v-card-text",[n("v-list",[t._l(t.selectedProjects,function(e){return[n("v-list-tile",{key:e.id},[n("v-list-tile-content",[n("v-list-tile-title",[t._v("\n                    "+t._s(e.id)+" - "+t._s(e.name_with_namespace)+"\n                  ")]),t._v(" "),e.pipelines?n("div",[n("v-list-tile-sub-title",[e.pipelines.branches?n("span",[t._v("Branches")]):t._e(),t._v(" "),t._l(e.pipelines.branches,function(e){return[n("v-chip",{key:e.id},[n("PipelineStatus",{attrs:{pipeline:e}}),t._v("\n                          "+t._s(e.ref)+"\n                        ")],1)]})],2),t._v(" "),n("v-list-tile-sub-title",[e.pipelines.tags?n("span",[t._v("Tags")]):t._e(),t._v(" "),t._l(e.pipelines.tags,function(e){return[n("v-chip",{key:e.id},[n("PipelineStatus",{attrs:{pipeline:e}}),t._v("\n                          "+t._s(e.ref)+"\n                        ")],1)]})],2)],1):t._e()],1),t._v(" "),n("v-list-tile-action",[n("v-btn",{attrs:{icon:"",flat:"",ripple:"",color:"error"},on:{click:function(n){t.handleRemoveProject(e)}}},[n("v-icon",[t._v("delete")])],1)],1)],1),t._v(" "),n("v-divider")]})],2)],1)],1)],1)],1)],1)},staticRenderFns:[]};var k=n("VU/8")(b,m,!1,function(t){n("Oi6/")},null,null).exports;i.a.use(_.a);var j=new _.a({routes:[{path:"/",name:"Dashboard",component:k}]}),x=n("v/L+"),P=n.n(x),w=(n("sax8"),{state:{gitlab_url:"https://gitlab.com",gitlab_token:""},getters:{gitlab_url:function(t){return t.gitlab_url},gitlab_token:function(t){return t.gitlab_token}},mutations:{set_gitlab_url:function(t,e){t.gitlab_url=e},set_gitlab_token:function(t,e){t.gitlab_token=e}}});i.a.use(l.a);var y=new P.a({storage:window.localStorage}),S=new l.a.Store({modules:{configuration:w},strict:!1,plugins:[y.plugin]});i.a.use(a.a),i.a.config.productionTip=!1,new i.a({el:"#app",store:S,router:j,components:{App:v},template:"<App/>"})},"Oi6/":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.b74aaef7c8e9120fef3e.js.map